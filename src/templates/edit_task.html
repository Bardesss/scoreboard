{% extends 'base.html' %}
{% block content %}
<div class="mdc-card mb-4">
  <div class="mdc-card__content">
    <h2 class="mdc-typography--headline5 mb-4">Edit Task</h2>
    {% if errors %}
      {% for error in errors %}
      <div class="alert alert-danger" role="alert" data-alert-id="{{ loop.index }}">
        <span>{{ error }}</span>
        <button type="button" class="alert-close" onclick="closeAlert({{ loop.index }})">
          <i class="bi bi-x"></i>
        </button>
      </div>
      {% endfor %}
    {% endif %}
    <form method="post" action="/admin/tasks/edit/{{ task.id }}?boardgame_id={{ boardgame_id }}" class="row mb-4" novalidate>
      <div class="edit-form-field">
        <div class="mdc-text-field">
          <input type="number" name="number" class="mdc-text-field__input" placeholder=" " value="{{ task.number }}" required>
          <label class="mdc-text-field__label">Number</label>
        </div>
      </div>
      <div class="edit-form-field">
        <div class="mdc-text-field">
          <input type="text" name="name" class="mdc-text-field__input" placeholder=" " value="{{ task.name }}" required>
          <label class="mdc-text-field__label">Task Name</label>
        </div>
      </div>
      <div class="edit-form-button">
        <button type="submit" class="mdc-button mdc-button--raised form-button">Save</button>
      </div>
    </form>
  </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
        setTimeout(() => {
            if (alert && !alert.classList.contains('fade-out')) {
                closeAlert(alert.dataset.alertId);
            }
        }, 5000);
    });
});

function closeAlert(alertId) {
    const alert = document.querySelector(`[data-alert-id="${alertId}"]`);
    if (alert) {
        alert.classList.add('fade-out');
        setTimeout(() => {
            alert.remove();
        }, 300);
    }
}
</script>
{% endblock %} 